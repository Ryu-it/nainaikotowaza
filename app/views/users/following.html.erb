<%= render "shared/flash_message" %>

<div class="min-h-screen bg-gradient-to-b from-slate-900 via-rose-950/70 to-slate-950 py-12 px-6">
  <div class="max-w-3xl mx-auto">
    <section class="bg-white border border-rose-100 rounded-2xl shadow-sm px-8 py-12">
      <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 sm:gap-6 w-full">
        <div class="flex-1 min-w-0">
          <p class="text-sm text-gray-500"><%= @user.name %>さんが</p>
          <h1 class="text-xl sm:text-2xl font-semibold text-gray-900">フォロー中のユーザー</h1>
          <p class="mt-1 text-xs text-gray-500">全<%= @users.size %>人</p>
        </div>
        <%= link_to "プロフィールへ戻る",
                    user_path(@user),
                    class: "inline-flex items-center justify-center rounded-xl border border-rose-200 bg-rose-50 px-4 py-4 text-sm font-medium text-rose-700 hover:bg-rose-100 transition" %>
      </div>

      <div class="mt-8">
        <% if @users.any? %>
  <div class="space-y-5">
    <% @users.each do |user| %>
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0 rounded-xl border border-rose-100 bg-rose-50 px-6 py-4">
        <%= link_to user_path(user), class: "flex items-center gap-4 group" do %>
          <% if user.avatar.attached? %>
            <%= image_tag user.avatar.variant(resize_to_fill: [64, 64]),
                          class: "h-16 w-16 rounded-full object-cover border border-rose-100 shadow-sm" %>
          <% else %>
            <div
              class="h-16 w-16 rounded-full bg-rose-100 text-rose-600 inline-flex items-center justify-center
                     text-lg font-semibold border border-rose-200 shadow-sm leading-none"
            >
              <%= (user.name.presence || "?").first.upcase %>
            </div>
          <% end %>
          <div>
            <p class="text-lg font-medium text-gray-900 group-hover:text-rose-600 transition">
              <%= user.name %>
            </p>
          </div>
        <% end %>

        <% if current_user != user %>
          <div class="sm:flex-shrink-0">
            <%= render "shared/follow_button", user: user %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
<% else %>

          <p class="py-12 text-center text-sm text-gray-500">まだフォローしているユーザーはいません。</p>
        <% end %>
      </div>
    </section>
  </div>
</div>
