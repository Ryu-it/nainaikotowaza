<%= render "shared/flash_message" %>

<div class="min-h-screen bg-gradient-to-b from-slate-900 via-rose-950/70 to-slate-950 py-12 px-6">
  <div class="max-w-3xl mx-auto">
    <section class="bg-white border border-rose-100 rounded-2xl shadow-sm px-8 py-10">
      <div class="flex items-center justify-between gap-6 w-full">
        <div class="flex-1 min-w-0">
          <p class="text-sm text-gray-500"><%= @user.name %>さんのフォロワー</p>
          <h1 class="text-2xl font-semibold text-gray-900">フォロワー一覧</h1>
          <p class="mt-1 text-xs text-gray-500">全<%= @users.size %>人</p>
        </div>
        <%= link_to "プロフィールへ戻る",
                    user_path(@user),
                    class: "inline-flex items-center justify-center rounded-xl border border-rose-200 bg-rose-50 px-4 py-4 text-sm font-medium text-rose-700 hover:bg-rose-100 transition" %>
      </div>

      <div class="mt-8 ">
        <% if @users.any? %>
          <div class="space-y-5">
            <% @users.each do |user| %>
              <div class="flex items-center justify-between rounded-xl border border-rose-100 bg-rose-50 px-6 py-4">
                <%= link_to user_path(user), class: "flex items-center gap-4 group" do %>
                  <% if user.avatar.attached? %>
                    <%= image_tag user.avatar.variant(resize_to_fill: [64, 64]),
                                  class: "h-16 w-16 rounded-full object-cover border border-rose-100 shadow-sm" %>
                  <% else %>
                    <div
  class="h-16 w-16 rounded-full bg-rose-100 text-rose-600 inline-flex items-center justify-center
         text-lg font-semibold border border-rose-200 shadow-sm leading-none"
>                      <%= (user.name.presence || "?").first.upcase %>
                    </div>
                  <% end %>
                  <div>
                    <p class="text-lg font-medium text-gray-900 group-hover:text-rose-600 transition"><%= user.name %></p>
                  </div>
                <% end %>

                <% if current_user != user %>
                  <% if current_user.following?(user) %>
                    <%= link_to "フォローを外す",
                                user_follows_path(user),
                                data: { turbo_method: :delete },
                                class: "inline-flex items-center justify-center rounded-lg border border-gray-400 bg-gray-200 px-4 py-2 text-sm font-medium text-gray-800 hover:bg-gray-300 transition" %>
                  <% else %>
                    <%= link_to "フォローする",
                                user_follows_path(user),
                                data: { turbo_method: :post },
                                class: "inline-flex items-center justify-center rounded-lg border border-blue-800 bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition" %>
                  <% end %>
                <% end %>
              </div>
            <% end %>
          </div>
        <% else %>
          <p class="py-12 text-center text-sm text-gray-500">まだフォロワーはいません。</p>
        <% end %>
      </div>
    </section>
  </div>
</div>
