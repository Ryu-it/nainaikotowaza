<div class="flex items-center justify-center min-h-screen bg-gradient-to-b from-slate-900 via-rose-950/70 to-slate-950">
  <div class="flex flex-col space-y-4 w-full max-w-2xl p-6">
    <div class="border bg-pink-50 rounded-xl py-8 px-6 shadow-sm">

      <% visible_notifications = @notifications.reject { |n| n.action == "invitation" } %>

      <% if visible_notifications.present? %>
        <% visible_notifications.each do |notification| %>
          <div class="flex items-center bg-white rounded-lg p-4 mb-3 shadow-sm">
            <!-- アイコン -->
            <% case notification.action %>
            <% when "follow" %>
              <i class="fa-solid fa-user text-2xl mr-3"></i>
            <% when "reaction" %>
              <i class="fa-regular fa-face-smile text-2xl mr-3"></i>
            <% when "comment" %>
              <i class="fa-regular fa-comment-dots text-2xl mr-3"></i>
            <% else %>
              <i class="fa-regular fa-bell text-2xl mr-3"></i>
            <% end %>

            <!-- テキスト -->
            <div class="text-gray-900 text-lg leading-snug">
              「
              <%= link_to notification.actor.name,
                          user_path(notification.actor),
                          class: "font-bold text-gray-900 hover:underline" %>
              」さんが
              <% case notification.action %>
              <% when "follow" %>
                あなたをフォローしました

              <% when "reaction" %>
  <% reactable = notification.notifiable&.reactable %>

  <%
post_link = (
  case reactable
  when Proverb
    link_to "投稿", proverb_path(reactable),
            class: "font-semibold text-gray-800 hover:underline"
  when Comment
    link_to "コメント",
            proverb_path(reactable.proverb, anchor: "comment-#{reactable.id}"),
            class: "font-semibold text-gray-800 hover:underline"
  else
    "投稿"
  end
)
%>

  <% case notification.notifiable.kind %>
  <% when "like"  %>
    「<%= post_link %>」に「いいね」をしました
  <% when "laugh" %>
    「<%= post_link %>」に「わらえる」をしました
  <% when "deep"  %>
    「<%= post_link %>」に「深い」をしました
  <% else %>
    「<%= post_link %>」にリアクションしました
<% end %>


              <% when "comment" %>
                <% comment = notification.notifiable if notification.notifiable.is_a?(Comment) %>
                <% if comment.present? %>
                  <% comment_link =
                    link_to "投稿",
                            proverb_path(comment.proverb, anchor: "comment_#{comment.id}"),
                            class: "font-semibold text-gray-800 hover:underline"
                  %>
                  「<%= comment_link %>」にコメントしました
                <% else %>
                  コメントしました
                <% end %>

              <% else %>
                通知が届きました
              <% end %>
            </div>
          </div>
        <% end %>
      <% else %>
        <p class="text-xl font-bold text-center text-gray-700">お知らせはありません</p>
      <% end %>
    </div>

    <div class="mt-8 flex justify-center">
    <%= paginate @notifications, window: 2 %>
    </div>

  </div>
</div>
